<!DOCTYPE html>

<html lang="en">

<head>
	<title>Mosaics-Game</title>
	
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Kurzbeschreibung" />

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script type="text/JavaScript" src="js/bootstrap.min.js"></script>
	<script type="text/JavaScript" src="js/mosaicsgame.js"></script>
	<script type="text/JavaScript" src="js/mosaicsgame-validation.js"></script>
	<script type="text/JavaScript" src="js/mosaicsgame-cmds.js"></script>
	<script type="text/JavaScript" src="js/jquery-ui.js"></script>
	<script src="js/prism.js"></script>
	
	<link href="style/prism.css" rel="stylesheet" />	
	<link href="style/jquery-ui.css" rel="stylesheet">
	<link href="style/bootstrap.min.css" rel="stylesheet">
	<link href="style/style.css" rel="stylesheet">		
</head>

<body>
	<nav class="navbar navbar-inverse navbar-static-top">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Mosaics-Game</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li><a href="editor.html">Editor</a></li>
					<li><a href="index.html">Game</a></li>
					<li class="active"><a href="docu.html">Documentation<span class="sr-only">(current)</span></a></li>
					<li><a href="about.html">Imprint</a></li>					
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container-fluid -->
	</nav>

	<div class="container">
		<div class="page-header">
			<h1>
				Documentation<br><small>A project of students @ THM Friedberg, Germany</small>
			</h1>
			<div class="jumbotron">
				<div>
					<h3>Syntax</h3>
					<h4>Befehl</h4>
					<p>Die allgemeine Befehlssyntax ist folgendermaßen aufgebaut:
						&lt;Befehlsname&gt;(&lt;Parameter1&gt;,...&lt;ParameterN&gt;)<br>
						Es gibt folgende gültige Befehlsnamen: square, circle, rectangle, line, triangle und clearcell.
					</p>
					<h4>Parameter</h4>
					<p>
						Parametertypen gibt es folgende: &lt;Position&gt;, &lt;Breite/Höhe&gt;, &lt;Punkt&gt; und &lt;Farbe&gt;.<br>
						Breite/Höhe werden als positive Integer angegeben.<br>
						Folgende Farbangaben sind erlaubt: aqua, black, blue, fuchsia, gray, green, lime, maroon, navy, olive, orange, purple, red, silver, teal und yellow.<br>
						Die Positions- und Punktsyntax sind etwas komplizierter.
					</p>
					<h5>Position</h5>
					<p>
						Die Positionssyntax ist folgendermaßen aufgebaut: &lt;Spalte&gt;,&lt;Zeile&gt;<br>
						Die Syntax von &lt;Spalte&gt; und &lt;Zeile&gt; lautet wiederum: &lt;Startposition&gt;[[:&lt;Schrittweite&gt;]:&lt;Endposition&gt;]]<br>
						&lt;Schrittweite&gt; sowie &lt;Endposition&gt; sind optionale Angaben (markiert durch die eckigen Klammern).<br>
						Erlaubt sind also folgende Formen:<br>
						&lt;Startposition&gt;<br>
						&lt;Startposition&gt;:&lt;Endposition&gt;<br>
						&lt;Startposition&gt;:&lt;Schrittweite&gt;:&lt;Endposition&gt;<br>
						Für die Start- und Endposition und die Schrittweite werden Integer erwartet.
					</p>
					<h5>(Anker-)Punkte</h5>
					<p>
						Die Punktsyntax hat den folgenden Aufbau: &lt;Horizontalankerpunkt&gt;&lt;Vertikalankerpunkt&gt;<br>
						Für &lt;Horizontalankerpunkt&gt; gibt es folgende gültige Angaben: “L”,”C” und “R”.<br>
						“L” steht für “Left”, “C” für “Center” und “R” für “Right”.<br>
						Für &lt;Vertikalankerpunkt&gt; gibt es folgende gültige Angaben: “T”,”C” und “B”.<br>
						“T” steht für “Top”, “C” für “Center” und “B” für “Bottom”.<br>
						Die Angaben sind nicht case-sensitiv und dürfen in ihrer Reihenfolge vertauscht werden.<br>
						Beispiel: “TL”, “LT”,  “tl” und “lt” beschreiben alle den Ankerpunkt links oben in einer Zelle.<br>
						Somit kann man neun mögliche Ankerpunkte auf jeweils 4 verschiedene Arten beschreiben (mit Ausnahme des Mittelpunktes (“CC” bzw. “cc”)).
					</p>
					<h3>Parsen des Befehls</h3>
					<p>Bevor ein Befehl ausgeführt wird, wird dieser geparst und anschließend die Parameter validiert.</p>
					<h4>Vorgehensweise</h4>
					<p>Beim Parsen wird Folgendes in folgender Reihenfolge geprüft:
						<ul class="list-group">
							<li class="list-group-item">1. Der Befehlsname</li>
							<li class="list-group-item">2. Das Vorhandensein der offenen und geschlossenen Klammer</li>
							<li class="list-group-item">3. Die Anzahl der angegebenen Parameter</li>
						</ul>
						Bei falschen Eingaben wird der Benutzer über die erste Falscheingabe entsprechend informiert.
					</p>
					<h4>Umsetzung</h4>
					<h5>Initialisierung</h5>
					<p>Die Funktion zum Parsen des Befehls namens “parseCommand” bekommt die eingegebene Zeile des Benutzers als Parameter. Zuerst wird diese Zeile mittels der öffnenden Klammer in mehrere Teile getrennt. Erwartet werden zwei Teile: Der Name des Befehls und die Befehlsparameter.</p>
					<h5>Befehlsname (siehe Code-Snippet zu "validateCmdName")</h5>
					<p>Zur Validierung, dass ein gültiger Befehlsname angegeben wurde, wird eine Switch/Case-Struktur verwendet. Ist der Befehlsname gültig, wird die erwartete Anzahl an Parametern für diesen Befehl zurückgegeben, andernfalls wird -1 zurückgegeben. Der Rückgabewert wird demzufolge auf Gleichheit mit -1 überprüft.</p>
					<h5>Klammern</h5>
					<p>Zur Validierung des Vorhandenseins der Klammern wird die String-Methode indexOf verwendet. Ist das gesuchte Zeichen nicht im String vorhanden gibt diese Funktion den Wert -1 zurück. Auch hier wird auf diesen Wert geprüft.</p>
					<h6>Besonderheit</h6>
					<p>Des Weiteren musste festgestellt werden, dass nur eine öffnende Klammer angegeben wurde, da man anhand dieser die Befehlszeile in zwei Teile auftrennt. Um dies festzustellen, wird die Variable, die den String mit den Befehlsparametern hält nur dann initialisiert, wenn das Array mit den durch die öffnende Klammer aufgeteilten Strings genau 2 Strings enthält. Diese Variable wird dementsprechend auf den Wert undefined geprüft.</p>
					<h5>Parameteranzahl (siehe Code-Snippet zu "validateNumberOfParams")</h5>
					<p>Zur Validierung der Parameteranzahl wird die bereits oben erwähnte Switch/Case-Struktur verwendet. Zusätzlich wird noch überprüft, ob eine Standardfarbe ausgewählt wurde. Ist das der Fall, so wird die Anzahl der angegebenen Parameter auf Gleichheit mit der erwarteten Parameteranzahl-1 geprüft. Schlägt der Vergleich fehl, so wird anschließend nochmal mit der erwarteten Parameteranzahl verglichen, um festzustellen, ob trotz Standardfarbe eine Farbe als Parameter angegeben wurde. Auch dies wird als korrekte Eingabe akzeptiert.</p>
					<div class="panel-group scrollable" id="parseCommand-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#parseCommand-snippets" 
							href="#parseCommand-b" aria-expanded="false" aria-controls="parseCommand-b">
							<div class="panel panel-default">
								<div id="parseCommand-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "parseCommand"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="parseCommand-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="parseCommand-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function parseCommand(cmdLine) {
	var cmdAndParams = cmdLine.split("(");
	var cmd = cmdAndParams[0], params;

	if(cmdAndParams.length == 2) {
		params = cmdAndParams[1];	
		params = params.replace(")","");
		params = params.split(",");
	}
	
	if(!validateCmdName(cmd)) {
		$("#err").html("Unknown command.");
	} else if (cmdLine.indexOf("(") == -1) {
		$("#err").html("Opening bracket is missing.");
	} else if (params == undefined) {
		$("#err").html("Too much opening brackets.");
	} else if (cmdLine.indexOf(")") == -1) {
		$("#err").html("Closing bracket is missing.");
	} else if(!validateNumberOfParams(cmd, params)) {
		var numParams = params.length;
		if(cmdAndParams[1].trim() == ")") numParams = 0;
		$("#err").html("Invalid number of parameters (required " + 
				requiredParamCountForCmd(cmdAndParams[0]) + 
				", got "+ numParams + ").");
	} 
	
	if ($("#err").html().length == 0) return true;
	else return false;
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#parseCommand-snippets" 
							href="#validateCmdName-b" aria-expanded="false" aria-controls="validateCmdName-b">
							<div class="panel panel-default">
								<div id="validateCmdName-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateCmdName" (inkl. "requiredParamCountForCmd")
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateCmdName-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateCmdName-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateCmdName(cmd) {
	return (requiredParamCountForCmd(cmd) != -1);
}

function requiredParamCountForCmd(cmd) {
	switch(cmd) {
		case "clearcell":	return 2;
		
		case "square":
		case "circle":		return 3;
		
		case "rectangle":
		case "line":		return 5;
		
		case "triangle":	return 6;
		
		default:			return -1;
	}
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#parseCommand-snippets" 
							href="#validateNumberOfParams-b" aria-expanded="false" aria-controls="validateNumberOfParams-b">
							<div class="panel panel-default">
								<div id="validateNumberOfParams-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateNumberOfParams"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateNumberOfParams-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateNumberOfParams-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateNumberOfParams(cmd, params) {
	var paramCount = requiredParamCountForCmd(cmd);
	
	if($("#color_dropdown").val() != "(None)" &&
			params.length == paramCount-1)
		return true;

	if(params.length != paramCount)
		return false;

	return true;
}</code></pre>
							</div>
						</div>
					</div>
					<h3>Validierung der Parameter</h3>
					<p>
						Die Validierung der Parameter erfolgt in der Reihenfolge in der die sie erwartet werden:
						<ul class="list-group">
							<li class="list-group-item">1. Position</li>
							<li class="list-group-item">2. Linie bzw. Punkte (bei Linienbefehl)</li>
							<li class="list-group-item">3. Dreieck bzw. Punkte und Fläche (bei Dreiecksbefehl)</li>
							<li class="list-group-item">4. Farbe</li>
						</ul>
						Bei falschen Eingaben wird der Benutzer über die erste Falscheingabe entsprechend informiert.
					</p>
					<div class="panel-group scrollable" id="validateParameters-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#validateParameters-snippets" 
							href="#validateParameters-b" aria-expanded="false" aria-controls="validateParameters-b">
							<div class="panel panel-default">
								<div id="validateParameters-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateParameters"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateParameters-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateParameters-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateParameters(cmdLine) {
	var cmdAndParams = cmdLine.split("(");
	var cmd = cmdAndParams[0], params = cmdAndParams[1];
	
	params = params.replace(")","").split(",");
	
	if(!validatePositionParams(cmd, params)) return 0;
	
	if(!validateLineParams(cmd, params)) return 0;
	
	if(!validateTriangleParams(cmd, params)) return 0;
	
	if(!validateColorParam(cmd, params)) return 0;

	return 1;
}</code></pre>
							</div>
						</div>
					</div>
					<h4>Position</h4>
					<p>
						Zur Validierung der Positionsangaben für die Spalte und Zeile werden diese in ein Objekt positionRanges umgewandelt und mit einer entsprechenden Methode validiert. Das Objekt teilt die Positionsangaben in Spalte und Zeile auf. Diese wiederum werden mittels des Objekts positionRange in Startposition, Endposition und Schrittweite aufgeteilt. Diese Attribute werden nacheinander in der angegebenen Reihenfolge zuerst für die Spalte und danach für die Zeile überprüft. Der Benutzer wird über alle falschen aus den 6 möglichen Angaben informiert.
					</p>
					<h5>Start- und Endposition</h5>
					<p>
						Die Start- und Endpositionen werden jeweils 4 Prüfungen unterzogen:<br>
						Ist die Positionsangabe...
						<ul class="list-group">
							<li class="list-group-item">eine Zahl</li>
							<li class="list-group-item">größer-gleich dem kleinsten erlaubten Wert (hier: 1)</li>
							<li class="list-group-item">kleiner-gleich dem größten erlaubten Wert (variabel je nach Mosaikgröße)</li>
							<li class="list-group-item">ein Integer</li>
						</ul>
						Bestehen die Positionsangaben die Prüfungen, so sind sie valide. Programmiertechnisch wird auf das Gegenteil geprüft und ein Fehlermeldungstext bei positivem Ergebnis generiert.
					</p>
					<h5>Schrittweite</h5>
					<p>
						Die Schrittweite darf entweder positiv- oder negativ-gannzahlig sein. Null darf sie nicht sein. Ist die Endposition kleiner als die Startposition, so ist eine negative Schrittweite valide und eine positive Schrittweite invalide. Ist die Startposition kleiner-gleich der Endposition, so gilt der umgekehrte Fall. Damit die Positionsangaben mit ein und derselben For-Schleife verwendet werden können, werden im Falle, dass die Endposition kleiner als die Startposition ist, die Vorzeichen von Start-/Endposition und Schrittweite getauscht, sodass die Schrittweite wieder > 0 sein sollte. Aus diesem Grund muss zur Validierung die Schrittweite lediglich auf > 0 und zusätzlich darauf geprüft werden, ob sie ein Integer ist.
					</p>
					<div class="panel-group scrollable" id="validatePositionParams-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#validatePositionParams-snippets" 
							href="#validatePositionParams-b" aria-expanded="false" aria-controls="validatePositionParams-b">
							<div class="panel panel-default">
								<div id="validatePositionParams-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validatePositionParams"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validatePositionParams-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validatePositionParams-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validatePositionParams(cmd, params) {
	var posRanges;

	if(cmd == "rectangle") posRanges = rectangleRanges(params);
	else posRanges = new positionRanges(params[0],params[1]);
	
	var errMsg = posRanges.validate();
	
	if(errMsg) {
		$("#err").html(errMsg);
		return false;
	}
	
	return true;
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#validatePositionParams-snippets" 
							href="#rectangleRanges-b" aria-expanded="false" aria-controls="rectangleRanges-b">
							<div class="panel panel-default">
								<div id="rectangleRanges-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "rectangleRanges"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="rectangleRanges-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="rectangleRanges-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function rectangleRanges(params) {
	var colRangeStr = params[0] + ":" + (Number(params[0]) + Number(params[2]) - 1).toString();
	var rowRangeStr = params[1] + ":" + (Number(params[1]) + Number(params[3]) - 1).toString();
	return new positionRanges(colRangeStr,rowRangeStr);
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#parseCommand-snippets" 
							href="#positionRange-b" aria-expanded="false" aria-controls="positionRange-b">
							<div class="panel panel-default">
								<div id="positionRange-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zur Klasse "positionRange"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="positionRange-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="positionRange-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function positionRange(rangeStr) {
	var range = rangeStr.split(":");
	
	if (range.length == 3) {
		this.from = Number(range[0]);
		this.inc = Number(range[1]);
		this.to = Number(range[2]);
	} else if(range.length == 2) {
		this.from = Number(range[0]);
		this.to = Number(range[1]);
		if(this.to >= this.from) this.inc = 1;
		else this.inc = -1;
	} else if(range.length == 1) {
		this.from = this.to = Number(range[0]);
		this.inc = 1;
	} else {
		this.from = this.to = this.inc = Number.NaN;
	}
	
	this.swapSign = function() {
		this.from *= -1;
		this.inc *= -1;
		this.to *= -1;
		this.signSwapped = true;
	}
	
	if(this.from > this.to && this.from >= 0 && this.to >= 0) this.swapSign();
	else this.signSwapped = false;
	
	this.validateInc = function() {
		return  (this.to-this.from >= 0 && this.inc > 0 &&
				this.inc == parseInt(this.inc) )
	};
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#validatePositionParams-snippets" 
							href="#positionRanges-b" aria-expanded="false" aria-controls="positionRanges-b">
							<div class="panel panel-default">
								<div id="positionRanges-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zur Klasse "positionRanges"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="positionRanges-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="positionRanges-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function positionRanges(colStr, rowStr) {
	this.colRange = new positionRange(colStr);
	this.rowRange = new positionRange(rowStr);
	
	this.validate = function() {
		var errMsg = "Invalid position Ranges (", err=false;
		
		if(this.colRange.signSwapped) this.colRange.swapSign();
		if(this.rowRange.signSwapped) this.rowRange.swapSign();
		
		if(Number.isNaN(this.colRange.from) || 
			this.colRange.from < 1 ||
			this.colRange.from > bounds[0] ||
			this.colRange.from != parseInt(this.colRange.from) ) {
			errMsg += "colum start position";
			err = true;
		}
		if(Number.isNaN(this.colRange.to) || 
			this.colRange.to < 1 ||
			this.colRange.to > bounds[0] ||
			this.colRange.to != parseInt(this.colRange.to)) {
			if(err) errMsg += ", ";
			errMsg += "colum end position";
			err = true;
		}
		
		if(this.colRange.signSwapped) this.colRange.swapSign();
		if(this.colRange.inc != 1) {
			if(!this.colRange.validateInc()) {
				if(err) errMsg += ", ";
				errMsg += "colum increment"
				err = true;
			}
		}
		if(this.colRange.signSwapped) this.colRange.swapSign();
		
		if(Number.isNaN(this.rowRange.from) || 
			this.rowRange.from < 1 ||
			this.rowRange.from > bounds[1] ||
			this.rowRange.from != parseInt(this.rowRange.from)) {
			if(err) errMsg += ", ";
			errMsg += "row start position"
			err = true;
		}
		if(Number.isNaN(this.rowRange.to) || 
			this.rowRange.to < 1 ||
			this.rowRange.to > bounds[1] ||
			this.rowRange.to != parseInt(this.rowRange.to)) {
			if(err) errMsg += ", ";
			errMsg += "row end position"
			err = true;
		}
		
		if(this.rowRange.signSwapped) this.rowRange.swapSign();
		if(this.rowRange.inc != 1) {
			if(!this.rowRange.validateInc()) {
				if(err) errMsg += ", ";
				errMsg += "row increment"
				err = true;
			}
		}
		if(this.rowRange.signSwapped) this.rowRange.swapSign();
		
		if(err) return errMsg + ").";
		else return undefined;
	};
}</code></pre>
							</div>
						</div>

					</div>
					<h4>Punkte (Linie und Dreieck)</h4>
					<p>
						Zur Validierung eines Punktes wird zuerst geprüft, ob genau zwei Ankerpunkte (also zwei Buchstaben) angegeben wurden. Ist dies der Fall wird anschließend geprüft, ob die erste Angabe ein valider Horizontalankerpunkt und die zweite Angabe ein valider Vertikalankerpunkt ist oder umgekehrt. Ist auch diese Prüfung erfolgreich, handelt es sich um einen validen Punkt. In den anderen Fällen wurde ein invalider Punkt angegeben.
					</p>
					<div class="panel-group scrollable" id="validatePoint-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#validatePoint-snippets" 
							href="#validatePoint-b" aria-expanded="false" aria-controls="validatePoint-b">
							<div class="panel panel-default">
								<div id="validatePoint-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validatePoint"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validatePoint-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validatePoint-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validatePoint(p) {
	var validYParts = 	["t","c","b"];
	var validXParts = 	["l","c","r"];
	
	if(p.length != 2) return false;
	
	if(	(validYParts.indexOf(p[0]) != -1 && validXParts.indexOf(p[1]) != -1) ||
		(validYParts.indexOf(p[1]) != -1 && validXParts.indexOf(p[0]) != -1 ) )
		return true;
	else return false;
}</code></pre>
							</div>
						</div>
					</div>
					<h4>Linie</h4>
					<p>
						Zur Validierung einer Linie wird überprüft, ob die angegebenen Punkte valide und verschieden sind.
					</p>
					<div class="panel-group scrollable" id="validateLineParams-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#validateLineParams-snippets" 
							href="#validateLineParams-b" aria-expanded="false" aria-controls="validateLineParams-b">
							<div class="panel panel-default">
								<div id="validateLineParams-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateLineParams"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateLineParams-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateLineParams-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateLineParams(cmd, params) {
	if(cmd.indexOf("line") != -1) {
		var errMsg = validateLine(params[2].toLowerCase(), params[3].toLowerCase());
		
		if(errMsg) {
			$("#err").html(errMsg);
			return false;
		}
	}
	return true;
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#validateLineParams-snippets" 
							href="#validateLine-b" aria-expanded="false" aria-controls="validateLine-b">
							<div class="panel panel-default">
								<div id="validateLine-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateLine"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateLine-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateLine-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateLine(p1,p2) {
	if(validatePoint(p1) && validatePoint(p2)) {
		var p1o = pointOffset(p1), p2o = pointOffset(p2);
		if (p1o[0] != p2o[0] || p1o[1] != p2o[1])
			return undefined;
		else return "Invalid line (points are equal).";
	} else return "Invalid points.";
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#validateLineParams-snippets" 
							href="#pointOffset-b" aria-expanded="false" aria-controls="pointOffset-b">
							<div class="panel panel-default">
								<div id="pointOffset-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "pointOffset"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="pointOffset-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="pointOffset-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function pointOffset(p) {
	var validYParts = [ "t", "c", "b" ];
	var validXParts = [ "l", "c", "r" ];
	var offsets = [ 2, cellsize / 2 + 1, cellsize ];
	var pOffset = [ 0, 0 ];

	if (p == "cc")
		pOffset = [ offsets[1], offsets[1] ];
	else if (validYParts.indexOf(p[0]) != -1 && validXParts.indexOf(p[1]) != -1) {
		pOffset[0] = offsets[validXParts.indexOf(p[1])];
		pOffset[1] = offsets[validYParts.indexOf(p[0])];
	} else if (validYParts.indexOf(p[1]) != -1
			&& validXParts.indexOf(p[0]) != -1) {
		pOffset[0] = offsets[validXParts.indexOf(p[0])];
		pOffset[1] = offsets[validYParts.indexOf(p[1])];
	}
	return pOffset;
}</code></pre>
							</div>
						</div>
					</div>
					<h4>Dreieck</h4>
					<p>
						Zur Validierung eines Dreicks wird zuerst überprüft, ob die angegebenen Punkte valide sind. Ist dies der Fall wird anschließend überprüft, ob die drei angegebenen Punkte eine Fläche “aufspannen”.
					</p>
					<h5>Dreiecksfläche</h5>
					<p>
						Um festzustellen, ob die angegebenen Punkte für das Dreieck eine Fläche “aufspannen”, wird eine Vektorformel verwendet. Zuerst werden die Verbindungsverktoren vom ersten und zweiten, sowie dem ersten und dritten Vektoren berechnet. Anschließend wird die Determinante der beiden Verbindungsvektoren berechnet. Ist das Ergebnis ungleich Null, wird eine Fläche aufgespannt. Die eigentlich korrekte Dreiecksfläche entspricht der Hälfte der Betragswertes der Determinante, welche jedoch für Validierung nicht benötigt wird.<br>
						Zur Vereinfachung wurde eine Vektorklasse mit einer Vektorsubtraktionsmethode erstellt, mit der die Verbindungsvektoren berechnet werden.
					</p>
					<div class="panel-group scrollable" id="validateTriangleParams-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#validateTriangleParams-snippets" 
							href="#validateTriangleParams-b" aria-expanded="false" aria-controls="validateTriangleParams-b">
							<div class="panel panel-default">
								<div id="validateTriangleParams-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateTriangleParams"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateTriangleParams-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateTriangleParams-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateTriangleParams(cmd, params) {
	if(cmd.indexOf("triangle") != -1) {
		var i = 2;
		
		if(	!validatePoint(params[i].toLowerCase() ) || 
			!validatePoint(params[i+1].toLowerCase() ) || 
			!validatePoint(params[i+2].toLowerCase() ) ) {
			$("#err").html("Invalid points.");
			return false;			
		} else if( !validateTriangle(params[i].toLowerCase(), params[i+1].toLowerCase(), params[i+2].toLowerCase() ) ) {
			$("#err").html("Invalid triangle (area equals zero).");
			return false;
		}
	}
	return true;
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#validateTriangleParams-snippets" 
							href="#validateTriangle-b" aria-expanded="false" aria-controls="validateTriangle-b">
							<div class="panel panel-default">
								<div id="validateTriangle-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateTriangle"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateTriangle-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateTriangle-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateTriangle(p1,p2,p3) {
	var p1o = pointOffset(p1), p2o = pointOffset(p2), p3o = pointOffset(p3);
	var p1v = new vector(p1o), p2v = new vector(p2o), p3v = new vector(p3o);
	var a = p1v.sub(p2v), b = p1v.sub(p3v);

	return (a.x*b.y-a.y*b.x != 0);
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#validateTriangleParams-snippets" 
							href="#vector-b" aria-expanded="false" aria-controls="vector-b">
							<div class="panel panel-default">
								<div id="vector-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zur Klasse "vector"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="vector-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="vector-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function vector(point) {
	if(point != null) {
		this.x = point[0];
		this.y = point[1];		
	} else {
		this.x = 0;
		this.y = 0;
	}
	
	this.sub = function(v) {
		var ret = new vector();
		ret.x = this.x - v.x;
		ret.y = this.y - v.y;
		return ret;
	};
}</code></pre>
							</div>
						</div>
					</div>
					<h4>Farbe (optionaler Parameter)</h4>
					<p>
						Da die Menge der validen Farben in einem globalen Array hinterlegt ist, wird der Einfachheit halber geprüft, ob die angegebene Farbe im Array vorhanden ist. Bei Verwendung des clearcell-Befehls oder einer Standardfarbe wird die Validierung der Farbe explizit übersprungen, weil in diesen Fällen keine Farbe angegeben wird.
					</p>
					<div class="panel-group scrollable" id="validateColorParam-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#validateColorParam-snippets" 
							href="#validateColorParam-b" aria-expanded="false" aria-controls="validateColorParam-b">
							<div class="panel panel-default">
								<div id="validateColorParam-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateColorParam"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateColorParam-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateColorParam-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function validateColorParam(cmd, params) {
	if(cmd.indexOf("clearcell") == -1 && params.length == requiredParamCountForCmd(cmd)) {
		if(!validateColor(params[params.length-1])) {
			$("#err").html("Invalid color.");
			return false;
		}		
	}
	return true;
}</code></pre>
							</div>
						</div>
						<a class="collapsed" data-toggle="collapse" data-parent="#validateColorParam-snippets" 
							href="#validateColor-b" aria-expanded="false" aria-controls="validateColor-b">
							<div class="panel panel-default">
								<div id="validateColor-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "validateColor"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="validateColor-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="validateColor-h">
							<div class="panel-body">
								<pre><code class="language-javascript">var validColors = ["aqua", "black", "blue", "fuchsia", "gray", "green", "lime",
					"maroon", "navy", "olive", "orange", "purple", "red", "silver", "teal", "yellow" ];

function validateColor(color)
{
	return validColors.indexOf(color) != -1;
}</code></pre>
							</div>
						</div>
					</div>
					<h4>Vergleich des kreierten Mosaiks mit dem Muster</h4>
					<p>
						Um zu ermitteln, ob das durch Befehle erstellte Mosaik mit dem Muster-Mosaik identisch ist und das Spiel damit gewonnen wurde, wird wie folgt vorgegangen:
						<ul class="list-group">
							<li class="list-group-item">1. Alle Mosaikelemente des Benutzer-Mosaiks und des Muster-Mosaiks werden ausgewählt</li>
							<li class="list-group-item">2. Die Anzahl der Mosaikelemente der beiden Mosaiks wird auf Gleichheit geprüft</li>
							<li class="list-group-item">3. War die Prüfung erfolgreich, wird für jedes Benutzerelement anhand seiner Position das korrespondierende Musterelement gesucht, <br>&nbsp;&nbsp;&nbsp;&nbsp;andernfalls wird die Prüfung mit negativem Ergebnis abgebrochen</li>
							<li class="list-group-item">4. Wurde das jeweilige Element gefunden, wird die Anzahl der Attribute auf Gleichheit geprüft, <br>&nbsp;&nbsp;&nbsp;&nbsp;andernfalls wird die Prüfung mit negativem Ergebnis abgebrochen</li>
							<li class="list-group-item">5. War die Prüfung erfolgreich, wird für jedes Attribut, außer dem ID-Attribut, der Name und der Wert auf Gleichheit überprüft, <br>&nbsp;&nbsp;&nbsp;&nbsp;andernfalls wird die Prüfung mit negativem Ergebnis abgebrochen</li>
							<li class="list-group-item">6. War eine der Attributprüfungen nicht erfolgreich, wird die Prüfung mit negativem Ergebnis abgebrochen</li>
							<li class="list-group-item">7. Waren alle Prüfungen für alle Elemente erfolgreich, wird ein positives Ergebnis zurückgegeben</li>
						</ul>
						War der Vergleich positiv, wird dem Spieler eine Gewinnmeldung inklusive der Anzahl an benötigten Befehlen präsentiert.
					</p>
					<div class="panel-group scrollable" id="compareSVGs-snippets" role="tablist"
						aria-multiselectable="true" 
						style="height:100%;">
						<a class="collapsed" data-toggle="collapse" data-parent="#compareSVGs-snippets" 
							href="#compareSVGs-b" aria-expanded="false" aria-controls="compareSVGs-b">
							<div class="panel panel-default">
								<div id="compareSVGs-h" class="panel-heading" role="tab" >
									<h4 class="panel-title" style="text-align: center;">
										Code-Snippet zu "compareSVGs"
									</h4>
								</div>
							</div>
						</a>						
						<div aria-expanded="false" id="compareSVGs-b" class="panel-collapse collapse" 
							role="tabpanel" aria-labelledby="compareSVGs-h">
							<div class="panel-body">
								<pre><code class="language-javascript">function compareSVGs() {
	var user_svg_elements = $("#mosaics > *[id^='e']");
	var template_svg_elements = $("#mosaics-template > *[id^='te']");
	var template_child, user_child;
	
	// 1st check if counts of svg elements are equal
	if(template_svg_elements.length == user_svg_elements.length &&
			template_svg_elements.length != 0) {
		for(var i = 0; i < user_svg_elements.length; i++) {
			// get user svg element
			user_child = user_svg_elements.eq(i);
			// find corresponding template svg element
			template_child = $("#t" + user_child.attr("id"));
			if( template_child.get(0) != undefined ) {
				// 2nd check if counts of svg attributes are equal
				if( user_child.get(0).attributes.length ==
					template_child.get(0).attributes.length) {
					for(var j = 0; j < user_child.get(0).attributes.length; j++) {
						if( user_child.get(0).attributes[j].name == "id") continue;
						// 3rd check if attribute names and values are equal
						if( user_child.get(0).attributes[j].value !=
							template_child.attr(user_child.get(0).attributes[j].name) ) 
						{
							// attribute values and names are not equal
							return false;							
						}
					}
				}
			} else {
				// template has no element at the corresponding position
				// ==> number of elements are equal, positions are not equal
				return false;
			}
		}
		// element counts, id's (and therefore implicitly the positions)
		// and attribute names and values were equal
		return true;
	} else {
		// element counts were not equal 
		return false;
	}
}</code></pre>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</div>
</body>
</html>
